@model NotesMarketPlace.Models.SellYourNotesViewModel
@{
    ViewBag.Title = "Sell Your Notes - Notes MarketPlace";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


@Styles.Render() {
<style type="text/css">
    table.first-table tr td:nth-child(5) {
        text-align: center;
    }

    table:not(first) tr td:nth-child(6) {
        text-align: center;
    }

    table thead tr th {
        border: hidden !important;
    }

  

    .card-body a:hover {
        text-decoration: none;
    }
</style>
}



<main role="main" class="pt-5">
    <div class="container" style="margin-top: 70px;">
        <!-- Heading-->
        <div class="row mb-4">
            <div class="col-md-6">
                <h1 class="heading">Dashboard</h1>
            </div>
            <div class="col-md-6">
                <a class="nav-link" href="@Url.Action("SaveNotes","Notes")"><button type="submit" class="btn btn-general btn-sm mt-0 float-right">ADD NOTE</button></a>
            </div>
        </div>
        <!-- Heading End-->
        <!-- Dashboard Card-->
        <div class="row">
            <div class="col-lg-2 col-md-4 col-sm-4 col-xs-6">
                <div class="card dashboard-card  mx-auto" style="">
                    <div class="card-body text-center text-lg-left">
                        <img src="@Url.Content("~/Content/images/Dashboard/earning-icon.png")" width="40px" height="40px" alt="myearing">
                        <h1 class="dashboard-card-heading mt-2">My Earning</h1>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-8 col-sm-8 col-xs-6">
                <div class="card dashboard-card mx-auto" style="">
                    <div class="card-body">
                        <div class="row">

                            <div class="col-md-6 col-sm-6 col-xs-6 text-center">
                                @if (Model.NoOfSoldNotes != 0)
                                {
                                    <a href='@Url.Action("MySoldNotes","ManageNotes")'>
                                        <h1 class="dashboard-card-heading ">@Model.NoOfSoldNotes</h1>
                                        <p class="dashboard-card-text">Number Of Notes Sold</p>
                                    </a>
                                }
                                else
                                {
                                    <h1 class="dashboard-card-heading ">@Model.NoOfSoldNotes</h1>
                                    <p class="dashboard-card-text">Number Of Notes Sold</p>
                                }

                            </div>

                            <div class="col-md-6 col-sm-6 col-xs-6 text-center">
                                @if (Model.MoneyEarned != 0)
                                {
                                    <a href='@Url.Action("MySoldNotes","ManageNotes")'>
                                        <h1 class="dashboard-card-heading ">$@Model.MoneyEarned</h1>
                                        <p class="dashboard-card-text">Money Earned</p>
                                    </a>
                                }
                                else
                                {
                                    <h1 class="dashboard-card-heading ">$@Model.MoneyEarned</h1>
                                    <p class="dashboard-card-text">Money Earned</p>
                                }

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-4 col-xs-4">
                <div class="card dashboard-card mx-auto" style="">
                    <div class="card-body">
                        @if (Model.NoOfMyDownloads != 0)
                        {
                            <a href='@Url.Action("MyDownloadsNotes","ManageNotes")'>
                                <h1 class="dashboard-card-heading text-center">@Model.NoOfMyDownloads</h1>
                                <p class="text-center dashboard-card-text">My Downloads</p>
                            </a>
                        }
                        else
                        {
                            <h1 class="dashboard-card-heading text-center">@Model.NoOfMyDownloads</h1>
                            <p class="text-center dashboard-card-text">My Downloads</p>
                        }

                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-4 col-xs-4">
                <div class="card dashboard-card mx-auto" style="">
                    <div class="card-body">
                        @if (Model.NoOfMyRejectedNotes != 0)
                        {
                            <a href='@Url.Action("MyRejectedNotes","ManageNotes")'>
                                <h1 class="dashboard-card-heading text-center">@Model.NoOfMyRejectedNotes</h1>
                                <p class="text-center dashboard-card-text">My Rejected Notes</p>
                            </a>
                        }
                        else
                        {
                            <h1 class="dashboard-card-heading text-center">@Model.NoOfMyRejectedNotes</h1>
                            <p class="text-center dashboard-card-text">My Rejected Notes</p>
                        }

                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-4 col-xs-4">
                <div class="card dashboard-card mx-auto" style="padding: 0px;">
                    <div class="card-body">
                        @if (Model.NoOfBuyerRequests != 0)
                        {
                            <a href='@Url.Action("BuyerRequest","ManageNotes")'>
                                <h1 class="dashboard-card-heading text-center">@Model.NoOfBuyerRequests</h1>
                                <p class="text-center dashboard-card-text">Buyer Requests</p>
                            </a>
                        }
                        else
                        {
                            <h1 class="dashboard-card-heading text-center">@Model.NoOfBuyerRequests</h1>
                            <p class="text-center dashboard-card-text">Buyer Requests</p>
                        }

                    </div>
                </div>
            </div>
        </div>
        <!-- Dashboard Card End-->
        <!-- Table Heading-->
        <div class="row mb-2" style="margin-top: 60px;">
            <div class="col-md-6">
                <h1 class="dashboard-table-heading mt-2">In Progress Notes</h1>
            </div>
            <div class="col-md-6 ">
                <div class="row no-gutters float-right">
                    <form class="form-inline my-2 my-lg-0">
                        <div class="form-group has-search mb-0">

                            <span class="fa fa-search form-control-feedback"></span>

                            <input type="search" class="form-control" id="inprogresssearchinput" placeholder="Search">
                        </div>

                        <button type="button" id="inprogresssearchbtn" class="btn btn-general btn-sm mt-0 ml-3  text-uppercase">Search</button>
                    </form>
                </div>

            </div>
            <!-- Table Heading End-->
            <!-- Table-->
            <div class="table-responsive">
                <table class="table custom-table first-table" id="inprogress">


                    <thead>
                        <tr>
                            <th>ADDED DATE</th>
                            <th>TITLE</th>
                            <th>CATEGORY</th>
                            <th>STATUS</th>
                            <th class="text-center">ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var a in Model.ListOfProgress)
                        {
                            <tr>
                                <td>@a.AddedDate</td>
                                <td>@a.Title</td>
                                <td>@a.Category</td>
                                <td>@a.Status</td>
                                <td>
                                    @if (@a.Status == "Draft")
                                    {
                                        <a href='@Url.Action("EditNotes", "Notes", new { id = @a.NoteID })'>
                                            <img src="@Url.Content("~/Content/images/Dashboard/edit.png")" width="20px" height="20px" alt="edit">
                                        </a>
                                        <a onclick="deleteNotes(@a.NoteID)">

                                            <img src="@Url.Content("~/Content/images/Dashboard/delete.png")" width="18px" class="ml-2" height="20px" alt="delete">
                                        </a>
                                    }
                                    else
                                    {
                                        <a href='@Url.Action("NoteDetails", "Notes", new { id = @a.NoteID })'>
                                            <img src="@Url.Content("~/Content/images/Dashboard/eye.png")" width="30px" height="15px" alt="edit">
                                        </a>
                                    }
                                </td>
                            </tr>
                        }

                    </tbody>
                </table>
            </div>
        </div>
        <!-- Table End-->
        <!-- Table Heading-->
        <div class="row mb-2" style="margin-top: 60px;">
            <div class="col-md-6">
                <h1 class="dashboard-table-heading mt-2">Published Notes</h1>
            </div>
            <div class="col-md-6 ">
                <div class="row no-gutters float-right">
                    <form class="form-inline my-2 my-lg-0">
                        <div class="form-group has-search mb-0">

                            <span class="fa fa-search form-control-feedback"></span>

                            <input type="search" class="form-control" id="publishsearchinput" placeholder="Search">
                        </div>

                        <button type="button" id="publishsearchbtn" class="btn btn-general btn-sm mt-0 ml-3  text-uppercase">Search</button>
                    </form>
                </div>

            </div>

        </div>
        <!-- Table Heading End-->
        <!-- Table-->
        <div class="table-responsive">
            <table class="table custom-table" id="publish">
                <thead>
                    <tr>
                        <th>ADDED DATE</th>
                        <th>TITLE</th>
                        <th>CATEGORY</th>
                        <th>SELL TYPE</th>
                        <th>PRICE</th>
                        <th class="text-center">ACTIONS</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var a in Model.ListOfPublished)
                    {
                        <tr>

                            <td>@a.AddedDate</td>
                            <td>@a.Title</td>
                            <td>@a.Category</td>
                            <td>@a.SellType</td>
                            <td>$ @a.SellingPrice</td>
                            <td>
                                <a href='@Url.Action("NoteDetails", "Notes", new { id = @a.NoteID })'>
                                    <img src="@Url.Content("~/Content/images/Dashboard/eye.png")" width="30px" height="15px" alt="edit">
                                </a>
                            </td>
                        </tr>
                    }

                </tbody>
            </table>
        </div>
        <!-- Table End-->



    </div>
</main>


@section Scripts{
    @if (@TempData["Success"] != null)
    {

        <script type="text/javascript">
        $(function () {
                 swal({
                    text: "@TempData["Success"]",
                     icon: "success",
                     buttons: {
                         confirm: { text: 'Ok', className: 'sweet-primary' },
                         
                     },
                });
        });
        </script>

    }
    @if (@TempData["Error"] != null)
    {

        <script type="text/javascript">
        $(function () {
                 swal({
                    text: "@TempData["Error"]",
                    icon: "error",
                });
        });
        </script>

    }



    <script type="text/javascript">

        $(document).ready(function() {

            var table1 = $('#inprogress').DataTable({
                "pageLength":5,
                "pagingType": "full_numbers",
                language: {
                    paginate: {
                        next: '<i class="fa fa-angle-right fa-2x"></i>',
                        previous: ' <i class="fa fa-angle-left fa-2x"></i>',
                        first: false,
                        last: false
                    }
                },
                bFilter: false,
                ordering: true,
                searching: true,
                "dom": '<"top">rt<"bottom"p>'

            });
            $('.dataTables_length').addClass('bs-select');


            $("#inprogresssearchbtn").click(function () {
                var x = $("#inprogresssearchinput").val();
                table1.search(x).draw();
            });




            var table = $('#publish').DataTable({
                "pageLength": 5,
                "pagingType": "full_numbers",
                language: {
                    paginate: {
                        next: '<i class="fa fa-angle-right fa-2x"></i>',
                        previous: ' <i class="fa fa-angle-left fa-2x"></i>',
                        first: false,
                        last: false
                    }
                },
                bFilter: false,
                ordering: true,
                searching: true,
                "dom": '<"top">rt<"bottom"p>'

            });
            $('.dataTables_length').addClass('bs-select');


            $("#publishsearchbtn").click(function () {
                var x = $("#publishsearchinput").val();
                table.search(x).draw();
            });


        });

         function deleteNotes(id) {
            swal({
                title: "Are you sure?",
                text: " you want to delete this note",
                icon: "error",
                buttons: ["No",true],
            })
                .then((willDelete) => {
                    if (willDelete != null) {
                       
                         window.location.href = '@Url.Action("DeleteNotes", "Notes")/' + id;

                    }

                     })



        }


    </script>
}